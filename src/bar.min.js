"use strict";function BarChart(t,i,e,a){this.configureChart(t,i,e,a),this.performPreoperations()}function getRandomInt(t,i){return t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t)+t)}BarChart.prototype.configureChart=function(t,i,e,a){this.setCanvasParameters(t,i,e,a),this.setChartParameters(t,i,e,a)},BarChart.prototype.setCanvasParameters=function(t,i,e,a){this.targetId=t,this.width=i,this.height=e,this.data=a},BarChart.prototype.setChartParameters=function(t,i,e,a){this.axisRatio=10,this.verticalMargin=this.height*this.axisRatio/100,this.horizontalMargin=this.width*this.axisRatio/100,this.axisColor="#000",this.axisWidth=.75,this.fontRatio=3,this.fontFamily="times",this.fontStyle="normal",this.fontWeight="300",this.fontColor="#000",this.verticalFontSize=this.height*this.fontRatio/100,this.horixontalFontSize=this.width*this.fontRatio/100,this.guidelineColor="#888888",this.guidelineWidth=.5},BarChart.prototype.performPreoperations=function(){this.createCanvas(),this.handleData(),this.prepareData(),this.drawChart()},BarChart.prototype.createCanvas=function(){let t=document.createElement("canvas");t.targetId=this.targetId+"-"+Math.random(),t.width=this.width,t.height=this.height,document.getElementById(this.targetId).innerHTML="",document.getElementById(this.targetId).appendChild(t),this.canvas=t,this.context=t.getContext("2d")},BarChart.prototype.handleData=function(){let t=this;t.labels=[],t.values=[],t.data.forEach(function(i){t.labels.push(i.label),t.values.push(i.value)})},BarChart.prototype.prepareData=function(){this.itemsNum=this.data.length,this.maxValue=Math.max.apply(null,this.values),this.minValue=Math.min.apply(null,this.values),this.verticalaxisWidth=this.height-2*this.verticalMargin,this.horizontalaxisWidth=this.width-2*this.horizontalMargin,this.verticalUpperBound=10*Math.ceil(this.maxValue/10),this.verticalLabelFreq=this.verticalUpperBound/this.itemsNum,this.horizontalLabelFreq=this.horizontalaxisWidth/this.itemsNum},BarChart.prototype.drawChart=function(){this.drawVerticalAxis(),this.drawVerticalLabels(),this.drawVerticalGuides(),this.drawHorizontalAxis(),this.drawHorizontalLabels(),this.drawHorizontalGuides(),this.drawBars()},BarChart.prototype.drawVerticalAxis=function(){this.context.beginPath(),this.context.strokeStyle=this.axisColor,this.context.lineWidth=this.axisWidth,this.context.moveTo(this.horizontalMargin,this.verticalMargin),this.context.lineTo(this.horizontalMargin,this.height-this.verticalMargin),this.context.stroke()},BarChart.prototype.drawVerticalLabels=function(){let t=this,i=t.fontStyle+" "+t.fontWeight+" "+t.verticalFontSize+"px"+t.fontFamily;t.context.font=i,t.context.textAlign="right",t.context.fillStyle=t.fontColor;let e=t.verticalaxisWidth/t.verticalUpperBound*t.verticalLabelFreq;for(let i=0;i<=t.itemsNum;i++){let a=t.verticalUpperBound-i*t.verticalLabelFreq,o=t.horizontalMargin-t.horizontalMargin/t.axisRatio,r=t.verticalMargin+i*e;t.context.fillText(a,o,r)}},BarChart.prototype.drawHorizontalAxis=function(){this.context.beginPath(),this.context.strokeStyle=this.axisColor,this.context.lineWidth=this.axisWidth,this.context.moveTo(this.horizontalMargin,this.height-this.verticalMargin),this.context.lineTo(this.width-this.horizontalMargin,this.height-this.verticalMargin),this.context.stroke()},BarChart.prototype.drawHorizontalLabels=function(){let t=this,i=t.fontStyle+" "+t.fontWeight+" "+t.verticalFontSize+"px"+t.fontFamily;t.context.textAlign="center",t.context.textBaseline="top",t.context.font=i,t.context.fillStyle=t.fontColor;for(let i=0;i<t.itemsNum;i++){let e=t.horizontalMargin+i*t.horizontalLabelFreq+t.horizontalLabelFreq/2,a=t.height-t.verticalMargin+t.verticalMargin/t.axisRatio;t.context.fillText(t.labels[i],e,a)}},BarChart.prototype.drawHorizontalGuides=function(){let t=this;t.context.strokeStyle=t.guidelineColor,t.context.lineWidth=t.guidelineWidth;let i=t.verticalaxisWidth/t.verticalUpperBound*t.verticalLabelFreq;for(let e=0;e<=t.itemsNum;e++){let a=t.horizontalMargin,o=t.verticalMargin+e*i,r=t.horizontalMargin+t.horizontalaxisWidth,n=t.verticalMargin+e*i;t.context.beginPath(),t.context.moveTo(a,o),t.context.lineTo(r,n),t.context.stroke()}},BarChart.prototype.drawVerticalGuides=function(){let t=this;t.context.strokeStyle=t.guidelineColor,t.context.lineWidth=t.guidelineWidth;for(let i=0;i<=t.itemsNum;i++){let e=t.horizontalMargin+i*t.horizontalLabelFreq,a=t.height-t.verticalMargin,o=e,r=t.verticalMargin;t.context.beginPath(),t.context.moveTo(e,a),t.context.lineTo(o,r),t.context.stroke()}},BarChart.prototype.drawBars=function(){let t=this;for(let i=0;i<t.itemsNum;i++){let e=t.createRandomRGB(),a="0.8",o=`rgba(${e.r},${e.g},${e.b},${a})`,r=`rgb(${e.r},${e.g},${e.b})`;t.context.beginPath();let n=t.horizontalMargin+i*t.horizontalLabelFreq+t.horizontalLabelFreq/t.axisRatio,h=t.height-t.verticalMargin,l=t.horizontalLabelFreq-2*t.horizontalLabelFreq/t.axisRatio,s=-1*t.verticalaxisWidth*t.values[i]/t.maxValue;t.context.fillStyle=o,t.context.strokeStyle=r,t.context.rect(n,h,l,s),t.context.stroke(),t.context.fill()}},BarChart.prototype.createRandomRGB=function(){return{r:getRandomInt(0,255),g:getRandomInt(0,255),b:getRandomInt(0,255)}};